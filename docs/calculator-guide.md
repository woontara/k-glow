# 견적 계산기 사용 가이드

## 개요

K-Glow 견적 계산기는 한국에서 러시아로 화장품을 수출할 때 필요한 모든 비용을 자동으로 계산합니다.

## 기능

### 1. 실시간 환율 조회

- ExchangeRate-API를 통한 실시간 환율 정보
- KRW ↔ RUB 자동 환전
- 1시간 캐시로 API 호출 최소화

### 2. 제품 정보 입력

각 제품별로 다음 정보를 입력합니다:

- **제품명**: 제품 이름
- **수량**: 주문 수량
- **가격(원)**: 개당 가격 (KRW)
- **무게(kg)**: 제품 1개의 무게
- **부피(m³)**: 제품 1개의 부피

여러 제품을 추가할 수 있습니다.

### 3. 배송 정보

#### 배송 방법

- **해상 운송**: 저렴하지만 느림 (1,500원/kg 또는 45,000원/m³)
- **항공 운송**: 빠르지만 비쌈 (6,000원/kg 또는 180,000원/m³)

배송비는 무게 기준 금액과 부피 기준 금액 중 높은 값으로 계산됩니다.

#### 출발지/도착지

- 기본값: 인천 → 모스크바
- 필요시 다른 도시로 변경 가능

### 4. 인증 정보

러시아 수출에 필요한 인증:

- **인증 불필요**: 인증 비용 없음
- **EAC 인증**: 500,000원/제품 (유라시아 경제 연합 인증)
- **GOST 인증**: 300,000원/제품 (러시아 국가 표준)
- **EAC + GOST**: 700,000원/제품 (두 인증 모두)

### 5. 자동 계산 항목

#### 관세 (6.5%)

- 과세 대상: 제품 가격 + 배송비
- 러시아 화장품 평균 관세율 적용

#### 부가세 (20%)

- 과세 대상: 제품 가격 + 배송비 + 관세
- 러시아 VAT 적용

## 계산 예시

### 예시 1: 소량 테스트 주문

**제품 정보**
- 제품: 수분 크림
- 수량: 10개
- 가격: 30,000원/개
- 무게: 0.2kg/개
- 부피: 0.0005m³/개

**배송 정보**
- 방법: 해상 운송
- 총 무게: 2kg
- 총 부피: 0.005m³

**인증**
- EAC 인증 (1개 제품)

**계산 결과**
```
제품 합계: 300,000원
배송비: 103,000원 (2kg × 1,500 + 기본 100,000)
관세: 26,195원 (6.5%)
부가세: 85,839원 (20%)
인증 비용: 500,000원
─────────────────
총액: 1,015,034원
총액(루블): 약 76,128루블
```

### 예시 2: 대량 수출

**제품 정보**
- 제품 1: 선크림 100개 (25,000원, 0.15kg, 0.0004m³)
- 제품 2: 클렌징폼 100개 (18,000원, 0.18kg, 0.0003m³)

**배송 정보**
- 방법: 항공 운송
- 총 무게: 33kg
- 총 부피: 0.07m³

**인증**
- EAC + GOST (2개 제품)

**계산 결과**
```
제품 합계: 4,300,000원
배송비: 262,600원
관세: 296,619원
부가세: 971,844원
인증 비용: 1,400,000원
─────────────────
총액: 7,231,063원
총액(루블): 약 542,330루블
```

## API 엔드포인트

### 환율 조회

```
GET /api/exchange-rate
```

응답:
```json
{
  "krwToRub": 0.075,
  "rubToKrw": 13.33,
  "krwToUsd": 0.00075,
  "usdToKrw": 1333,
  "lastUpdated": "2025-01-02T12:00:00.000Z"
}
```

### 견적 계산

```
POST /api/calculate-quote
```

요청:
```json
{
  "items": [
    {
      "name": "수분 크림",
      "quantity": 10,
      "priceKRW": 30000,
      "weight": 0.2,
      "volume": 0.0005
    }
  ],
  "shippingInfo": {
    "method": "sea",
    "origin": "인천",
    "destination": "모스크바",
    "totalWeight": 2,
    "totalVolume": 0.005
  },
  "certificationInfo": {
    "type": "EAC",
    "productCount": 1
  }
}
```

응답:
```json
{
  "items": [...],
  "subtotal": 300000,
  "shippingCost": 103000,
  "customsDuty": 26195,
  "vat": 85839,
  "certificationCost": 500000,
  "totalKRW": 1015034,
  "totalRUB": 76128,
  "exchangeRate": 0.075,
  "breakdown": {
    "itemsKRW": 300000,
    "shippingKRW": 103000,
    "customsKRW": 26195,
    "vatKRW": 85839,
    "certKRW": 500000
  }
}
```

## 환율 API 설정

기본적으로 고정 환율을 사용하지만, 실시간 환율을 사용하려면:

1. [ExchangeRate-API](https://www.exchangerate-api.com/)에서 무료 API 키 발급
2. `.env` 파일에 추가:
   ```
   EXCHANGE_RATE_API_KEY=your_api_key_here
   ```

무료 플랜: 월 1,500회 요청 가능 (충분함, 1시간 캐시 사용)

## 주의사항

1. **환율 변동**: 환율은 실시간으로 변하므로 최종 결제 시 금액이 다를 수 있습니다
2. **배송비**: 실제 배송비는 운송사와 협상에 따라 달라질 수 있습니다
3. **관세/부가세**: 제품 종류와 수입 규정에 따라 세율이 변경될 수 있습니다
4. **인증 비용**: 제품 복잡도와 인증 기관에 따라 비용이 달라질 수 있습니다

## 향후 개발 예정

- [ ] PDF 견적서 다운로드
- [ ] 이메일로 견적서 전송
- [ ] 견적 내역 저장 및 조회
- [ ] 다양한 통화 지원 (USD, EUR)
- [ ] 배송사별 실시간 운송비 조회
- [ ] 제품 템플릿 저장
